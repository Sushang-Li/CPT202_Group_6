<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" rel="script" src="js/index.js"></script>
    <link type="text/css" href="./css/index.css" rel="stylesheet">
</head>
<body>
<div id="top-add">
    <form id="menu">
        编号:<input type="text" id="id" class="input-text">
        姓名:<input type="text" id="name" class="input-text">
        年龄:<input type="text" id="age" class="input-text">
        学科:<input type="text" id="discipline" class="input-text">
        学分:<input type="text" id="score" class="input-text">
        <input type="submit" id="add" value="添加" class="input-text">
    </form>
</div>
<div id="men-table">
    <table id="table-all" border="1" cellpadding="0">
        <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Position</th>
            <th>Mobile Number</th>
            <th>Gender</th>
            <th>School email</th>
            <th>Emergency contact number</th>
            <th>operate</th>
        </tr>
    </table>
</div>
<!--
<script>
    window.onload = function () {
        //创建数组用来存取用户信息
        var users = [];

        //获取表单元素
        var form = document.getElementById("menu");
        var id = document.getElementById("id");
        var username = document.getElementById("username");
        var position = document.getElementById("position");
        var mobilePhone = document.getElementById("mobilePhone");
        var gender = document.getElementById("gender");
        var schoolEmail = document.getElementById("schoolEmail");
        var emergencyContactNumber = document.getElementById("emergencyContactNumber");
        var submit = document.getElementById("add");

        //监听表单提交事件
        form.addEventListener("submit",function (event) {
            event.preventDefault();//阻止表单默认提交

            //获取输入用户的用户信息
            var idValue = id.value;
            var nameValue = username.value;
            var positionValue = position.value;
            var mobilePhoneValue = mobilePhone.value;
            var genderValue = gender.value;
            var schoolEmailValue = schoolEmail.value;
            var emergencyContactNumberValue = emergencyContactNumber.value;

            //创建用户对象
            var user = {
                id: idValue,
                username: nameValue,
                position: positionValue,
                mobilePhone: mobilePhoneValue,
                gender: genderValue,
                schoolEmail: schoolEmailValue,
                emergencyContactNumber: emergencyContactNumberValue
            }
            //将用户信息添加到数组中
            users.push(user);

            //情况表单输入
            id.value = "";
            username.value = "";
            position.value = "";
            mobilePhone.value = "";
            gender.value = "";
            schoolEmail.value = "";
            emergencyContactNumber.value = "";

            //刷新表格
            refreshTable()


        });

        //刷新表格
        function refreshTable() {

            var table = document.getElementById("table-all");

            // 清空表格内容
            table.innerHTML = "";

            // 创建表头行
            var headerRow = document.createElement("tr");
            headerRow.innerHTML =
                "<th>ID</th><th>Username</th><th>Position</th><th>Mobile phone</th><th>Gender</th><th>school email</th><th>Emergency contact number</th><th>Operate</th>";
            table.appendChild(headerRow);
            //创建用户数据行
            for (var i = 0; i < users.length; i++) {
                var user = users[i];
                //创建行单元格
                var row = document.createElement("tr");
                var idCell = document.createElement("td");
                var usernameCell = document.createElement("td");
                var positionCell = document.createElement("td");
                var mobilePhoneCell = document.createElement("td");
                var genderCell = document.createElement("td");
                var schoolEmailCell = document.createElement("td");
                var emergencyContactNumberCell = document.createElement("td");
                var operateCell = document.createElement("td");

                // 设置单元格内容
                idCell.textContent = user.id;
                usernameCell.textContent = user.username;
                positionCell.textContent = user.position;
                mobilePhoneCell.textContent = user.mobilePhone;
                genderCell.textContent = user.gender;
                schoolEmailCell.textContent = user.schoolEmail;
                emergencyContactNumberCell.textContent = user.emergencyContactNumber;


                //创建修改和删除按钮
                var editButton = document.createElement("button");
                editButton.textContent = "Update";
                editButton.className = "button";
                editButton.addEventListener("click", function () {
                    editUser(user)
                });
                var deleteButton = document.createElement("button");
                deleteButton.textContent = "Delete";
                deleteButton.className = "button";
                deleteButton.addEventListener("click", function () {
                    deleteHandler(user)
                });

                // 将按钮添加到操作单元格中
                actionCell.appendChild(updateButton);
                actionCell.appendChild(deleteButton);


                // 将单元格添加到行中
                row.appendChild(idCell);
                row.appendChild(usernameCell);
                row.appendChild(positionCell);
                row.appendChild(mobilePhoneCell);
                row.appendChild(genderCell);
                row.appendChild(mobilePhoneCell);
                row.appendChild(emergencyContactNumberCell);
                row.appendChild(operateCell);

                // 将行添加到表格中
                table.appendChild(row);

            }
        }
        function deleteHandler(user) {
            var indexOf = users.indexOf(user);
            if (indexOf > -1){
                users.splice(indexOf,1);
            }
            refreshTable();
        }

        function editUser(user) {
            // 创建弹出页面
            var editPage = window.open("", "Edit User", "width=400,height=400");

            // 编辑页面的内容
            var editPageContent =
                "<h2>Add user</h2>" +
                "<label for='editId'>ID:</label>" +
                "<input type='text' id='editId' value='" + user.id + "' required><br>" +
                "<label for='editUserName'>Username:</label>" +
                "<input type='text' id='editUserName' value='" + user.username + "' required><br>" +
                "<label for='editPosition'>Position:</label>" +
                "<input type='text' id='editPosition' value='" + user.position + "' required><br>" +
                "<label for='editMobilePhone'>MobilePhone:</label>" +
                "<input type='text' id='editMobilePhone' value='" + user.mobilePhone + "' required><br>" +
                "<label for='editGender'>Gender:</label>" +
                "<input type='text' id='editGender' value='" + user.gender + "' required><br>" +
                "<label for='editMobilePhone'>MobilePhone:</label>" +
                "<input type='text' id='editMobilePhone' value='" + user.mobilePhone + "' required><br>" +
                "<label for='editEmergencyContactNumber'>EmergencyContactNumber:</label>" +
                "<input type='text' id='editEmergencyContactNumber' value='" + user.emergencyContactNumber + "' required><br>" +
                "<button id='saveButton'>保存修改</button>";

            // 设置弹出页面的内容
            editPage.document.body.innerHTML = editPageContent;
            // 获取保存按钮元素
            var saveButton = editPage.document.getElementById("saveButton");

            // 为保存按钮绑定点击事件
            saveButton.addEventListener("click", function() {
                saveChanges(users.indexOf(user),editPage);
            });

        }
        // 保存修改
        function saveChanges(index,editPage) {
            // 获取编辑页面的输入值
            var editId = editPage.document.getElementById("editId").value;
            var editUsername = editPage.document.getElementById("editUsername").value;
            var editPosition = editPage.document.getElementById("editPosition").value;
            var editMobilePhone = editPage.document.getElementById("editMobilePhone").value;
            var editGender = editPage.document.getElementById("editGender").value;
            var editSchoolEmail = editPage.document.getElementById("editSchoolEmail").value;
            var editEmergencyContactNumber = editPage.document.getElementById("editEmergencyContactNumber").value;

            // 更新对应索引的用户信息
            var user = users[index];
            user.id = editId;
            user.name = editName;
            user.age = editAge;
            user.discipline = editDiscipline;
            user.score = editScore;

            // 关闭编辑页面
            editPage.close();

            // 刷新表格
            refreshTable();
        }


    }


</script>
-->

<table class="table table-striped">
    <thead>
    <tr>
        <th>ID</th>
        <th>Username</th>
        <th>Position</th>
        <th>Mobile Number</th>
        <th>Gender</th>
        <th>School email</th>
        <th>Emergency contact number</th>
        <th>operate</th>
    </tr>
    <tr>
        <td>2145057</td>
        <td>2145057</td>
        <td>Student</td>
        <td>13847263384</td>
        <td>male</td>
        <td>2145057@email.com</td>
        <td>13847263384</td>

        <!--//更新和删除按钮-->
        <td>
            <button class="btn btn-primary btn-sm">Update</button>
            <button class="btn btn-primary btn-sm">Delete</button>
        </td>
    </tr>
    <tr>
        <td>2145561</td>
        <td>2145561</td>
        <td>Student</td>
        <td>15239796206</td>
        <td>male</td>
        <td>2145561@email.com</td>
        <td>15239796206</td>

        <!--//更新和删除按钮-->
        <td>
            <button class="btn btn-primary btn-sm">Update</button>
            <button class="btn btn-primary btn-sm">Delete</button>
        </td>
    </tr>
    </thead>
    <tbody></tbody>
</table>
</body>
</html>
